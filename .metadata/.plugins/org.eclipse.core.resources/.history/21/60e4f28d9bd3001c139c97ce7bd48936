package eva03.ejercicio01;
import java.util.Scanner;

public class Menu {

	Scanner tec=new Scanner(System.in);
	boolean fin;
	String fichero;
	Trafico t;

	public Menu(String fichero) {
		this.fichero=fichero;
		t=new Trafico(fichero);

		do{
			fin=eleccion();
		} while(!fin);

		t.commit();
	}

	private boolean eleccion() {
		int opcion;

		do {
			imprimir();
			opcion=tec.nextInt();
			tec.nextLine();
		} while(opcion<1 || opcion >7);

		if(opcion==7)
			return true;

		switch (opcion) {
		case 1 : 
			añadirV();
			break;
		case 2 : 
			eliminarV();
			break;
		case 3 :
			añadirSancion();
			break;
		case 4 : 
			consultar();
			break;
		case 5 : 
			eliminarS();
			break;
		case 6 : 
			listado();
			break;
		}
		return false;
	}

	private void imprimir() {

		System.out.println("\tElige una opcion: ");
		System.out.println("\t1. Añadir un vehiculo al municipio\n"
				+ "\t2. Eliminar un vehículo: si existen sanciones, debe mostrar el número de las mismas y no realizar la\n"
				+ "eliminación\n"
				+ "\t3. Añadir una sanción a un vehículo\n"
				+ "\t4. Consultar las sanciones que tiene un vehículo\n"
				+ "\t5. Eliminar las sanciones de un vehículo\n"
				+ "\t6. Mostrar un listado de los vehículos para los que la cuantía de las sanciones es superior a una cantidad\n"
				+ "determinada (que se debe solicitar)\n"
				+ "\t7. Terminar el programa");
	}

	private void añadirV() {

		boolean val=true;
		String matricula,marca,modelo,propietario,año;
		do {
			val=true;
			System.out.println("matricula:");
			matricula=tec.next();
			if(Vehiculo.valida(matricula)==false) {
				System.out.println("matricula invalida");
				val=false;
			}

		}while(!val);
		System.out.println("marca:");
		marca=tec.next();
		System.out.println("modelo:");
		modelo=tec.next();
		System.out.println("propietario:");
		propietario=tec.next();
		System.out.println("año:");
		año=tec.next();
		t.añadirVehiculo(matricula,marca,modelo,propietario,año);

	}

	private void eliminarV() {
		String matricula;
		System.out.println("matricula del vehiculo:");
		matricula= tec.next();
		t.eliminarVehiculo(matricula);

	}

	private void añadirSancion() {
		String matricula,fecha,motivo,importe;
		System.out.println("matricula del vehiculo:");
		System.out.println("matricula:");
		matricula=tec.next();
		System.out.println("fecha:");
		fecha=tec.next();
		System.out.println("motivo:");
		tec.nextLine();
		motivo=tec.nextLine();
		System.out.println("importe:");
		importe=tec.next();
		t.añadirSancion(matricula, fecha, motivo, importe);

	}

	private void consultar() {

		String matricula;
		System.out.println("matricula del vehiculo:");
		matricula=tec.next();
		t.consultaSanciones(matricula);

	}

	private void eliminarS() {

		String matricula;
		System.out.println("matricula del vehiculo:");
		matricula= tec.next();
		t.quitarSanciones(matricula);

	}

	private void listado() {

		int num;
		System.out.println("numero de sanciones:");
		num= tec.nextInt();
		t.vehiculosCon(num);

	}
}
