package serializacion;
import java.util.*;
import java.io.*;

/*Serializar objetos*/
public class Serializando {

	public static void main(String[] args) {

		Administrador jefe=new Administrador("Juan", 80000, 2005, 12, 15);

		jefe.setIncentivo(5000);

		// Objeto a serializar =>
		Empleado[] personal=new Empleado[3]; // Array de 3 elementos

		personal[0]=jefe;

		personal[1]=new Empleado("Ana", 25000, 2008, 10, 1);

		personal[2]=new Empleado("Luis", 18000, 2012, 9, 15);

		try {

			// Flujo de datos externo (salida)
			//ObjectOutputStream escribiendo_fichero=new ObjectOutputStream(new FileOutputStream("C:/Users/PC/Downloads/reciente/empleado.dat"));

			// Llevar un objeto al exterior
			//escribiendo_fichero.writeObject(personal);

			//escribiendo_fichero.close();

			// Flujo de datos interno (entrada)
			ObjectInputStream recuperando_fichero=new ObjectInputStream(new FileInputStream("C:/Users/PC/Downloads/reciente/empleado.dat"));

			Empleado[] personal_recuperado=(Empleado[])recuperando_fichero.readObject();

			recuperando_fichero.close();

			for (Empleado e : personal_recuperado) {

				System.out.println(e);

			}

		} catch(Exception e) {}

	}

}

// --------------------------------------------------------------------------------

class Empleado implements Serializable { // Aquellos objetos pertenecientes a esta
	// clase son susceptibles de convertirse en bytes
	// Add default serial version ID
	// Add generated serial version ID ==> El compilador de java le asigna un valor automaticamente (20 bytes)

	//private static final long serialVersionUID = 2L; // Declara la constante de clase serialVersionUID

	public Empleado(String n, double s, int anno, int mes, int dia) {

		nombre=n;

		sueldos=s;

		GregorianCalendar calendario=new GregorianCalendar(anno, mes-1, dia);

		fechaContrato=calendario.getTime();

	}

	public String getNombre() {

		return nombre;

	}

	public double getSueldo() {

		return sueldos;

	}

	public Date getFechaContrato() {

		return fechaContrato;

	}

	public void subirSueldo(double porcentaje) {

		double aumento=sueldos*porcentaje/100;

		sueldos+=aumento;

	}

	public String toString() { // Pertenece a la clase Object, toString--Object

		return "El nombre es = "+nombre+", y su sueldo es = "+sueldos+", fecha de contrato = "+fechaContrato;

	} // Este metodo se utiliza para pasar a texto (verbalizar) que es lo que hace nuestra clase

	private String nombre;

	private double sueldos;

	private Date fechaContrato;

}

// --------------------------------------------------------------------------------

class Administrador extends Empleado {

	/*
	private static final long serialVersionUID = 2L; // Se cambia la huella de forma manual
	// Java detecta que no tiene la misma huella
	*/

	public Administrador(String n, double s, int anno, int mes, int dia) {

		super(n, s, anno, mes, dia);

		incentivo=0;

	}

	public double getSueldo() {

		double sueldoBase=super.getSueldo();

		return sueldoBase+incentivo;

	}

	public void setIncentivo(double b) {

		incentivo=b;

	}

	public String toString() {

		return super.toString()+" Incentivo="+incentivo;

	}

	private double incentivo;

}
